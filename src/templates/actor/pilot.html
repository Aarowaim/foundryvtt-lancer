<form class="{{cssClass}} sheet-bg" autocomplete="off">

	{{!-- Sheet Header --}}
	<header class="sheet-header card clipped-bot">
		<img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
		<div class="header-fields">
			<h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name"/></h1>
		</div>
	</header>

	{{!-- Sheet Tab Navigation --}}
	<nav class="sheet-tabs tabs" data-group="primary">
		<a class="item" data-tab="dossier">&lt;PILOT//DOSSIER&gt;</a>
		<a class="item" data-tab="pilot">&lt;PILOT//TACTICAL&gt;</a>
		<a class="item" data-tab="mech">&lt;MECH//LOADOUT&gt;</a>
	</nav>

	{{!-- Sheet Body --}}
	<section class="sheet-body" style="height:-webkit-fill-available">

		{{!-- Dossier Tab --}}
		<div class="tab dossier active" data-group="primary" data-tab="dossier">
			<div style="grid-template: 1fr 1fr 1fr 1fr / 1fr">
				<div class="flexcol card clipped" style="grid-area: 1 / 1 / 2 / 2">
					<span class="lancer-stat-header major clipped-top">CALLSIGN</span>
					<input class="lancer-text-input major" type="string" name="data.pilot.callsign" value="{{data.pilot.callsign}}" data-dtype="String"/>
				</div>
				<div class="flexcol card clipped" style="grid-area: 2 / 1 / 3 / 2">
					<span class="lancer-stat-header major clipped-top">BACKGROUND</span>
					<input class="lancer-text-input major" type="string" name="data.pilot.background" value="{{data.pilot.background}}" data-dtype="String"/>
				</div>
				<div class="flexcol card clipped" style="grid-area: 3 / 1 / 4 / 2">
					<span class="lancer-stat-header major clipped-top">HISTORY</span>
					{{editor content=data.pilot.history target="data.pilot.history" button=true owner=owner editable=editable}}
				</div>
				<div class="flexcol card clipped" style="grid-area: 4 / 1 / 5 / 2">
					<span class="lancer-stat-header major clipped-top">NOTES</span>
					{{editor content=data.pilot.notes target="data.pilot.notes" button=true owner=owner editable=editable}}
				</div>
			</div>
		</div>

		<!-- {{!-- Owned Items Tab --}}
		<div class="tab items" data-group="primary" data-tab="items">
			<ol class="items-list">
			{{#each actor.items as |item id|}}
				<li class="item flexrow" data-item-id="{{item._id}}">
					<img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
					<h4 class="item-name">{{item.name}}</h4>
					<div class="item-controls">
						<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
						<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
					</div>
				</li>
			{{/each}}
			</ol>
		</div> -->

		{{!-- Pilot Tactical Tab --}}
		<div class="tab pilot" data-group="primary" data-tab="pilot">
			<div class="card clipped">
				<div class="flexrow">
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">LICENSE LEVEL</span>
						<input class="lancer-stat-input major" type="number" name="data.pilot.level" value="{{data.pilot.level}}" data-dtype="Number"\>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">GRIT</span>
						<input class="lancer-stat-input major" type="number" name="data.pilot.grit" value="{{data.pilot.grit}}" data-dtype="Number"\>
					</div>
				</div>
				<div class="flexrow">
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">HULL</span>
						<input class="lancer-stat-input major" type="number" name="data.mech.hull" value="{{data.mech.hull}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">AGILITY</span>
						<input class="lancer-stat-input major" type="number" name="data.mech.agility" value="{{data.mech.agility}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">SYSTEMS</span>
						<input class="lancer-stat-input major" type="number" name="data.mech.systems" value="{{data.mech.systems}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">ENGINEERING</span>
						<input class="lancer-stat-input major" type="number" name="data.mech.engineering" value="{{data.mech.engineering}}" data-dtype="Number"/>
					</div>
				</div>
			</div>
			<div class="card clipped">
				<div class="flexrow"><span class="lancer-stat-header major clipped-top">PILOT STATS</span></div>
				<div class="flexcol card clipped">
					<span class="lancer-stat-header medium clipped-top">HP</span>
					<div class="flexrow" style="align-self: center;">
						<input class="lancer-stat-input medium" type="number" name="data.pilot.stats.hp.value" value="{{data.pilot.stats.hp.value}}" data-dtype="Number"/>
						<span class="medium" style="max-width: min-content;" >/</span>
						<input class="lancer-stat-input medium" type="number" name="data.pilot.stats.hp.max" value="{{data.pilot.stats.hp.max}}" data-dtype="Number"/>
					</div>
				</div>
				<div class="flexrow">
					<div class="flexcol card clipped">
						<span class="lancer-stat-header medium clipped-top">ARMOR</span>
						<input class="lancer-stat-input medium" type="number" name="data.pilot.stats.armor" value="{{data.pilot.stats.armor}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header medium clipped-top">EVASION</span>
						<input class="lancer-stat-input medium" type="number" name="data.pilot.stats.evasion" value="{{data.pilot.stats.evasion}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header medium clipped-top">E-DEFENSE</span>
						<input class="lancer-stat-input medium" type="number" name="data.pilot.stats.edef" value="{{data.pilot.stats.edef}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header medium clipped-top">SPEED</span>
						<input class="lancer-stat-input medium" type="number" name="data.pilot.stats.speed" value="{{data.pilot.stats.speed}}" data-dtype="Number"/>
					</div>
				</div>
			</div>
      <div class="flexrow">
        <div class="card clipped">
          <h2 class="lancer-stat-header major clipped-top">WEAPONS</h2>
          {{#each pilot_loadout.weapons as |weapon key|}}
          <span class="item lancer-weapon-header" data-item-id="{{weapon._id}}"><img class="thumbnail" src="{{weapon.img}}" data-edit="{{weapon.img}}" title="{{weapon.name}}" height="10" width="10"/> {{weapon.name}} <a class="stats-control" data-action="delete"><i class="fas fa-trash"></i></a></span>
          {{/each}}
        </div>
        <div class="card clipped">
          <h2 class="lancer-stat-header major clipped-top">ARMOR</h2>
          {{#each pilot_loadout.armor as |armor key|}}
          <span class="item lancer-weapon-header" data-item-id="{{armor._id}}"><img class="thumbnail" src="{{armor.img}}" data-edit="{{armor.img}}" title="{{armor.name}}" height="10" width="10"/> {{armor.name}} <a class="stats-control" data-action="delete"><i class="fas fa-trash"></i></a></span>
          {{/each}}
        </div>
      </div>
      <div class="flexcol">
        <div class="card clipped">
					<h2 class="lancer-title clipped">SKILL TRIGGERS</h2>
					{{#if skills}}
						<ul class="items-list">
							{{#each skills as |skill key|}}
								<li class="card clipped skill-compact item" data-item-id="{{skill._id}}">
									<div class="lancer-trigger-header medium clipped-top" style="grid-area: 1/1/2/4">
										<i class="cci cci-skill icon--m" style="color: black;"> </i>
										<span class="major">{{skill.name}}</span>
										<a class="stats-control" style="color: black" data-action="delete"><i class="fas fa-trash"></i></a>
									</div>
									<div class="major" style="grid-area: 2/1/3/2; align-self: center">+{{double skill.data.rank}}</div>
									<div class="desc-text" style="grid-area: 2/2/3/3">{{skill.data.description}}</div>
								</li>
							{{/each}}
						</ul>
					{{/if}}
				</div>
        <div class="card clipped">
          <h2 class="lancer-title clipped">TALENTS</h2>
					{{#if talents}}
						<ul class="talents-list">
							{{#each talents as |talent key|}}
              <li class="card clipped talent-compact item" data-item-id="{{talent._id}}">
								<div class="lancer-talent-header medium clipped-top" style="grid-area: 1/1/2/4">
									<i class="cci cci-talent icon--m" style="color: black;"></i>
									<span class="major">{{talent.name}}</span>
									<a class="stats-control" style="color: black" data-action="delete"><i class="fas fa-trash"></i></a>
								</div>
                <ul style="grid-area: 2/1/3/3">
									{{#each talent.data.ranks as |rank lvl|}}
										{{#if (gt ../data.rank lvl)}}
											<li class="talent-rank-compact card clipped" style="padding: 5px">
												<i class="cci cci-rank-{{inc lvl}} icon--l" style="color: black; grid-area: 1/1/2/2"></i>
												<span class="major" style="grid-area: 1/2/2/3">{{rank.name}}</span>
												<div class="effect-text" style="grid-area: 2/1/3/3">{{{rank.description}}}</div>
											</li>
										{{/if}}
									{{/each}}
								</ul>
							</li>
							{{/each}}
						</ul>
					{{/if}}
        </div>
				<div class="card clipped">
					<h2 class="lancer-title clipped-top">LICENSES</h2>
					{{#each licenses as |license key|}}
					<span class="item lancer-reaction-header" data-item-id="{{license._id}}"><img class="thumbnail" src="{{license.img}}" data-edit="{{license.img}}" title="{{license.name}}" height="10" width="10"/> {{license.name}} <a class="stats-control" data-action="delete"><i class="fas fa-trash"></i></a></span>
					{{/each}}
				</div>
				<div class="card clipped">
					<h2 class="lancer-title clipped-top">CORE BONUSES</h2>
					{{#if core_bonuses}}
						<ul class="items-list">
							{{#each core_bonuses as |core_bonus key|}}
								<li class="card clipped cb-compact item" data-item-id="{{core_bonus._id}}">
									<div class="lancer-system-header medium clipped-top" style="grid-area: 1/1/2/2">
										<i class="cci cci-corebonus icon--m" style="color: black;"> </i>
										<span class="major">{{core_bonus.name}}</span>
										<a class="stats-control" style="color: black" data-action="delete"><i class="fas fa-trash"></i></a>
									</div>
									<div class="effect-text" style="grid-area: 2/1/3/2">{{core_bonus.data.effect}}</div>
								</li>
							{{/each}}
						</ul>
					{{/if}}
				</div>
				<div class="card clipped">
					<h2 class="lancer-title clipped-top">GEAR</h2>
					{{#each pilot_loadout.gear as |gear key|}}
					<span class="item lancer-weapon-header" data-item-id="{{gear._id}}"><img class="thumbnail" src="{{gear.img}}" data-edit="{{gear.img}}" title="{{gear.name}}" height="10" width="10"/> {{gear.name}} <a class="stats-control" data-action="delete"><i class="fas fa-trash"></i></a></span>
					{{/each}}
				</div>
			</div>
		</div>

		{{!-- Mech Tab --}}
		<div class="tab mech" data-group="primary" data-tab="mech">
			<span class="lancer-title major clipped">{{data.mech.frame}}</span>
			<div class="card clipped">
				<div class="flexrow">
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">STRUCTURE</span>
						<div class="flexrow" style="align-self: center;">
							<input class="lancer-stat-input major" type="number" name="data.mech.structure.value" value="{{data.mech.structure.value}}" data-dtype="Number"/>
							<span class="medium" style="max-width: min-content;" >/</span>
							<input class="lancer-stat-input major" type="number" name="data.mech.structure.max" value="{{data.mech.structure.max}}" data-dtype="Number"/>
						</div>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">HP</span>
						<div class="flexrow" style="align-self: center;">
							<input class="lancer-stat-input major" type="number" name="data.mech.hp.value" value="{{data.mech.hp.value}}" data-dtype="Number"/>
							<span class="medium" style="max-width: min-content;" >/</span>
							<input class="lancer-stat-input major" type="number" name="data.mech.hp.max" value="{{data.mech.hp.max}}" data-dtype="Number"/>
						</div>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">STRESS</span>
						<div class="flexrow" style="align-self: center;">
							<input class="lancer-stat-input major" type="number" name="data.mech.stress.value" value="{{data.mech.stress.value}}" data-dtype="Number"/>
							<span class="medium" style="max-width: min-content;">/</span>
							<input class="lancer-stat-input major" type="number" name="data.mech.stress.max" value="{{data.mech.stress.max}}" data-dtype="Number"/>
						</div>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">HEAT</span>
						<div class="flexrow" style="align-self: center;">
							<input class="lancer-stat-input major" type="number" name="data.mech.heat.value" value="{{data.mech.heat.value}}" data-dtype="Number"/>
							<span class="medium" style="max-width: min-content;">/</span>
							<input class="lancer-stat-input major" type="number" name="data.mech.heat.max" value="{{data.mech.heat.max}}" data-dtype="Number"/>
						</div>
					</div>
				</div>
				</p>
				<div class="flexrow">
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">ARMOR</span>
						<input class="lancer-stat-input medium" type="number" name="data.mech.armor" value="{{data.mech.armor}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">EVASION</span>
						<input class="lancer-stat-input medium" type="number" name="data.mech.evasion" value="{{data.mech.evasion}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">E-DEFENSE</span>
						<input class="lancer-stat-input medium" type="number" name="data.mech.edef" value="{{data.mech.edef}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">SPEED</span>
						<input class="lancer-stat-input medium" type="number" name="data.mech.speed" value="{{data.mech.speed}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">SENSORS</span>
						<input class="lancer-stat-input medium" type="number" name="data.mech.sensors" value="{{data.mech.sensors}}" data-dtype="Number"/>
					</div>
					<div class="flexcol card clipped">
						<span class="lancer-stat-header major clipped-top">SAVE TARGET</span>
						<input class="lancer-stat-input medium" type="number" name="data.mech.save" value="{{data.mech.save}}" data-dtype="Number"/>
					</div>
				</div>
			</div>
			<div class="card clipped">
        <h2 class="lancer-title clipped">MOUNTS<a class="add-button" data-action="create" style="float: right; margin-right: 1em; padding-bottom: 1em;">+</a></h2>
        <div class="flexrow">
          {{#each data.mech_loadout.mounts as |mount key|}}
          <div class="flexcol lancer-mount-container" data-item-id="{{key}}">
            <span class="lancer-mount-header clipped-top">
              {{{mount-selector mount key}}}
              <a class="mounts-control" data-action="delete"><i class="fas fa-trash"></i></a>
            </span>
            <span class="lancer-mount-body">
            {{#each mount.weapons as |weapon key|}}
              <span class="item lancer-weapon-header" data-item-id="{{weapon._id}}"><img class="thumbnail" src="{{weapon.img}}" data-edit="{{weapon.img}}" title="{{weapon.name}}" height="10" width="10"/> {{weapon.name}} <a class="stats-control" data-action="delete"><i class="fas fa-trash"></i></a></span>
            {{/each}}
            </span>
          </div>
          {{/each}}
        </div>
      </div>
      <div class="card clipped">
				<h2 class="lancer-title clipped">WEAPONS</h2>
				{{#each mech_loadout.weapons as |weapon key|}}
        <span class="item lancer-weapon-header" data-item-id="{{weapon._id}}"><img class="thumbnail" src="{{weapon.img}}" data-edit="{{weapon.img}}" title="{{weapon.name}}" height="10" width="10"/> {{weapon.name}} <a class="stats-control" data-action="delete"><i class="fas fa-trash"></i></a></span>
				{{/each}}
			</div>
			<div class="card clipped">
				<h2 class="lancer-title clipped">SYSTEMS</h2>
				{{#each mech_loadout.systems as |system key|}}
				<span class="item lancer-system-header" data-item-id="{{system._id}}"><img class="thumbnail" src="{{system.img}}" data-edit="{{system.img}}" title="{{system.name}}" height="10" width="10"/> {{system.name}} <a class="stats-control" data-action="delete"><i class="fas fa-trash"></i></a></span>
				{{/each}}
			</div>
 	</div>
</section>
</form>
